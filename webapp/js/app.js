// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
const tg = window.Telegram.WebApp;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
function initApp() {
    console.log('üöÄ RadioPlanner WebApp –∑–∞–ø—É—â–µ–Ω');
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    tg.expand();
    tg.enableClosingConfirmation();
    tg.BackButton.hide();
    
    console.log('üë§ User data:', tg.initDataUnsafe.user);
}

// –î–µ–º–æ-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
function showDemoAlert() {
    tg.showPopup({
        title: '–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ',
        message: '–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ-–∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏.',
        buttons: [{ type: 'ok' }]
    });
}

function submitDemoCampaign() {
    const demoData = {
        user_id: tg.initDataUnsafe.user?.id || 123456,
        radio_stations: ['LOVE RADIO', '–ê–í–¢–û–†–ê–î–ò–û'],
        start_date: '15.01.2025',
        end_date: '30.01.2025',
        campaign_days: 15,
        time_slots: [0, 1, 2],
        branded_section: 'auto',
        contact_name: '–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
        company: '–¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è',
        phone: '+79123456789',
        email: 'test@example.com',
        base_price: 15000,
        discount: 7500,
        final_price: 7500,
        actual_reach: 125000
    };
    
    console.log('üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö:', demoData);
    
    tg.sendData(JSON.stringify(demoData));
    
    tg.showPopup({
        title: '‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!',
        message: '–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ –±–æ—Ç–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–∞—Ç —Å –±–æ—Ç–æ–º –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.',
        buttons: [{ type: 'ok' }]
    });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', initApp);
